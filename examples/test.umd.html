<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../node_modules/ant-design-vue/dist/antd.css" />

    <title>Document</title>
  </head>
  <body>
    <div id="app">
      <a-button type="primary">Primary Button</a-button>
      <gp-table
        ref="$table"
        :columns="columns"
        :list-api="getUser"
        :pagination-keys="{ current: 'current', list: 'list', pageSize: 'pageSize', total: 'pagination.total' }"
      >
      </gp-table>
    </div>
    <script src="https://unpkg.com/dayjs/dayjs.min.js"></script>
    <script src="https://unpkg.com/dayjs/plugin/customParseFormat.js"></script>
    <script src="https://unpkg.com/dayjs/plugin/weekday.js"></script>
    <script src="https://unpkg.com/dayjs/plugin/localeData.js"></script>
    <script src="https://unpkg.com/dayjs/plugin/weekOfYear.js"></script>
    <script src="https://unpkg.com/dayjs/plugin/weekYear.js"></script>
    <script src="https://unpkg.com/dayjs/plugin/advancedFormat.js"></script>
    <script src="https://unpkg.com/vue"></script>
    <script src="https://unpkg.com/ant-design-vue"></script>
    <script src="../node_modules/@gupo/antdv-components/dist/index.js"></script>
    <!-- 注意 使用不了图标 -->
    <script>
      const { createApp, ref, watchEffect } = Vue;
      const $table = ref(null);

      const app = createApp({
        setup() {
          watchEffect(() => {
            console.log($table);
          });
          const getUser = params => {
            return new Promise(resolve => {
              const data = {
                list: Array.from({ length: params.pageSize }).map((_, index) => ({
                  name: `我是随机名字${index * params.current}`,
                  age: index,
                  male: index % 2,
                })),
                pagination: {
                  total: 10000,
                },
              };
              console.log('data: ', data);
              setTimeout(() => {
                resolve({
                  data,
                });
              }, 1000);
            });
          };
          const columns = [
            {
              dataIndex: 'name',
              title: '姓名',
              helpMessage: '这是帮助消息',
            },
            {
              dataIndex: 'age',
              title: '年龄',
            },
            {
              dataIndex: 'male',
              title: '性别',
            },
          ];
          return {
            columns,
            getUser,
          };
        },
      });

      app.use(antd);
      app.use(GupoAntdvComponents.default);
      app.mount('#app');

      console.log(antd, GupoAntdvComponents);
    </script>
  </body>
</html>
